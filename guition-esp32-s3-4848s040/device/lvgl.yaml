# =============================================================================
# LVGL TOUCHSCREEN INTERFACE
# =============================================================================
# This file defines the graphical user interface (GUI) for the ESP32 touchscreen
# display. It creates buttons that control smart home devices through Home Assistant.
#
# HOW IT WORKS:
# - Each button sends a command to Home Assistant when pressed (on_press/on_click)
# - Buttons receive state updates from sensors defined in sensors.yaml
# - When a sensor changes, the button's appearance updates (checked/unchecked)
#
# KEY CONCEPTS:
# - "id:" is a unique name used to reference this element from other files
# - "entity_id:" refers to a device/entity in Home Assistant
# - "checkable: true" means the button shows on/off state visually
# - "$variable" values (like $button_width) are defined in template.yaml
# - Sensors in sensors.yaml watch Home Assistant and update button states
# =============================================================================

lvgl:
  top_layer:
    widgets:
    
      # =========================================================================
      # TEMPERATURE DISPLAY (Top-left corner of screen)
      # =========================================================================
      # WHAT IT SHOWS:
      #   Displays two temperatures: "outdoor° / indoor°"
      #   Example: "15° / 22°" means 15°C outside, 22°C in the office
      #
      # WHERE THE DATA COMES FROM (defined in sensors.yaml):
      #   - Left number: sensor.outdoor_temperature (weather/outdoor sensor)
      #   - Right number: sensor.office_temperature (indoor room sensor)
      #
      # HOW IT UPDATES:
      #   When either temperature sensor changes in Home Assistant, the
      #   sensors.yaml file triggers an update to this label's text.
      # =========================================================================
      - label:
          text: "-° / -°"
          id: temperatures
          styles: roboto15_style
          align: top_left
          x: 8
          y: 4
          text_color: 0xFFFFFF

      # =========================================================================
      # CLOCK DISPLAY (Top-center of screen)
      # =========================================================================
      # WHAT IT SHOWS:
      #   Current time in 24-hour format (e.g., "14:30")
      #
      # WHERE THE DATA COMES FROM:
      #   The time component (configured in addon/time.yaml) syncs with
      #   Home Assistant's time and updates this label every minute.
      # =========================================================================
      - label:
          text: "--:--"
          id: display_time
          styles: roboto15_style
          align: top_mid
          x: 0
          y: 4
          text_align: center
          text_color: 0xFFFFFF
          
  pages:
    - id: main_page
      layout: 
        type: flex
        flex_flow: column_wrap
      scrollbar_mode: "auto"
      scroll_dir: "hor"
      width: 100%
      bg_color: Black
      bg_opa: cover
      pad_top: 34
      pad_bottom: 5
      pad_left: 5
      pad_right: 5
      
      widgets:
      
        # =========================================================================
        # BUTTON: Features Scene
        # =========================================================================
        # WHAT THIS BUTTON DOES:
        #   Activates the "Features" lighting scene - a preset that turns on
        #   LED strip accent lighting for a decorative effect.
        #
        # WHEN PRESSED:
        #   Calls Home Assistant service: scene.turn_on
        #   Target: scene.office_features
        #
        # HOW THE BUTTON KNOWS IF IT'S ACTIVE:
        #   sensors.yaml monitors: binary_sensor.office_scene_features
        #   When that sensor is ON, this button appears "checked" (highlighted)
        #   When that sensor is OFF, this button appears unchecked (dimmed)
        # =========================================================================
        - button: 
            height: $button_height_single
            width: $button_width
            checkable: false
            id: office_scene_features_button
            styles: control
            widgets:
              - label:
                  text_font: $icon_font
                  align: top_left
                  id: scene_features_icon                
                  text: $ledstrip
              - label:
                  align: bottom_left
                  id: scene_features_label
                  text: "Features"
            on_press:
              - homeassistant.service:
                  service: scene.turn_on
                  data:
                    entity_id: scene.office_features

        # =========================================================================
        # BUTTON: Calls Scene
        # =========================================================================
        # WHAT THIS BUTTON DOES:
        #   Activates the "Calls" lighting scene - optimized lighting for
        #   video calls (good front lighting, reduced background glare).
        #
        # WHEN PRESSED:
        #   Calls Home Assistant service: scene.turn_on
        #   Target: scene.office_desk_call
        #
        # HOW THE BUTTON KNOWS IF IT'S ACTIVE:
        #   sensors.yaml monitors: binary_sensor.office_scene_desk_call
        #   When that sensor is ON, this button appears "checked" (highlighted)
        # =========================================================================
        - button: 
            height: $button_height_single
            width: $button_width
            checkable: false
            id: office_scene_calls_button
            styles: control
            widgets:
              - label:
                  text_font: $icon_font
                  align: top_left
                  id: office_scene_calls_icon                
                  text: $videocall
              - label:
                  align: bottom_left
                  id: office_scene_calls_label
                  text: "Calls"
            on_press:
              - homeassistant.service:
                  service: scene.turn_on
                  data:
                    entity_id: scene.office_desk_call

        # =========================================================================
        # BUTTON: Evening Scene
        # =========================================================================
        # WHAT THIS BUTTON DOES:
        #   Activates the "Evening" lighting scene - warm, ambient lighting
        #   for relaxed evening use (lower brightness, warmer colors).
        #
        # WHEN PRESSED:
        #   Calls Home Assistant service: scene.turn_on
        #   Target: scene.office_evening
        #
        # HOW THE BUTTON KNOWS IF IT'S ACTIVE:
        #   sensors.yaml monitors: binary_sensor.office_scene_evening
        #   When that sensor is ON, this button appears "checked" (highlighted)
        # =========================================================================
        - button: 
            height: $button_height_single
            width: $button_width
            checkable: false
            id: office_scene_evening_button
            styles: control
            widgets:
              - label:
                  text_font: $icon_font
                  align: top_left
                  id: office_scene_evening_icon                
                  text: $nightlight
              - label:
                  align: bottom_left
                  id: office_scene_evening_label
                  text: "Evening"
            on_press:
              - homeassistant.service:
                  service: scene.turn_on
                  data:
                    entity_id: scene.office_evening

        # =========================================================================
        # BUTTON: Dimmed Scene
        # =========================================================================
        # WHAT THIS BUTTON DOES:
        #   Activates the "Dimmed" lighting scene - very low light levels,
        #   useful for watching movies or reducing eye strain at night.
        #
        # WHEN PRESSED:
        #   Calls Home Assistant service: scene.turn_on
        #   Target: scene.office_dimmed
        #
        # HOW THE BUTTON KNOWS IF IT'S ACTIVE:
        #   sensors.yaml monitors: binary_sensor.office_scene_dimmed
        #   When that sensor is ON, this button appears "checked" (highlighted)
        # =========================================================================
        - button: 
            height: $button_height_single
            width: $button_width
            checkable: false
            id: office_scene_dimmed_button
            styles: control
            widgets:
              - label:
                  text_font: $icon_font
                  align: top_left
                  id: office_scene_dimmed_icon                
                  text: $nightlight
              - label:
                  align: bottom_left
                  id: office_scene_dimmed_label
                  text: "Dimmed"
            on_press:
              - homeassistant.service:
                  service: scene.turn_on
                  data:
                    entity_id: scene.office_dimmed

        # =========================================================================
        # BUTTON: Blinds (Open Blind Controls Page)
        # =========================================================================
        # WHAT THIS BUTTON DOES:
        #   Navigates to the dedicated blinds control page.
        # =========================================================================
        - button: 
            height: $button_height_single
            width: $button_width
            checkable: false
            id: blinds_nav_button
            styles: control
            widgets:
              - label:
                  text_font: $icon_font
                  align: top_left
                  text: $blinds_closed
              - label:
                  align: bottom_left
                  text: "Blinds"
            on_click:
              - lvgl.page.show: blinds_page


        # =========================================================================
        # BUTTON: 3D Printer Power
        # =========================================================================
        # WHAT THIS BUTTON DOES:
        #   Turns the 3D printer's power outlet on or off.
        #   This controls a smart plug that supplies power to the printer.
        #
        # WHEN PRESSED:
        #   Calls Home Assistant service: switch.toggle
        #   Target: switch.office_3d_printer_power
        #   (Toggle means: if ON, turn OFF. If OFF, turn ON.)
        #
        # HOW THE BUTTON KNOWS IF IT'S ACTIVE:
        #   sensors.yaml monitors: switch.office_3d_printer_power
        #   When the switch is ON, this button appears "checked" (highlighted)
        #   When the switch is OFF, this button appears unchecked (dimmed)
        # =========================================================================
        - button: 
            height: $button_height_single
            width: $button_width
            checkable: true
            id: printer_power_button
            styles: control
            widgets:
              # Icon (shown when OFF)
              - label:
                  text_font: $icon_font
                  align: top_left
                  id: printer_power_icon
                  text: $printer
              # Progress (shown when ON)
              - obj:
                  align: top_left
                  id: print_progress_container
                  height: SIZE_CONTENT
                  width: SIZE_CONTENT
                  clickable: false
                  layout:
                    type: flex
                    flex_flow: row
                    flex_align_cross: end
                  bg_opa: TRANSP
                  border_width: 0
                  pad_all: 0
                  hidden: true
                  widgets:
                    - label:
                        text_font: roboto48_font
                        text_color: 0xFFFFFF
                        id: print_progress_label
                        text: "--"
                    - label:
                        text_font: roboto17_font
                        text_color: 0xFFFFFF
                        text: "%"
              - label:
                  align: bottom_left
                  id: printer_power_label
                  text: "Printer"
            on_click:
              - homeassistant.service:
                  service: switch.toggle
                  data:
                    entity_id: switch.office_3d_printer_power

        # =========================================================================
        # BUTTON: Filament Dryer
        # =========================================================================
        # WHAT THIS BUTTON DOES:
        #   Turns the filament dryer/heater on or off.
        #   This device removes moisture from 3D printer filament to improve
        #   print quality (wet filament causes bubbles and weak prints).
        #
        # WHEN PRESSED:
        #   Calls Home Assistant service: switch.toggle
        #   Target: switch.office_filament_heater_893b
        #   (The "893b" is a device identifier from the smart plug)
        #
        # HOW THE BUTTON KNOWS IF IT'S ACTIVE:
        #   sensors.yaml monitors: switch.office_filament_heater_893b
        #   When the switch is ON, this button appears "checked" (highlighted)
        #   When the switch is OFF, this button appears unchecked (dimmed)
        # =========================================================================
        - button: 
            height: $button_height_single
            width: $button_width
            checkable: true
            id: filament_heater_button
            styles: control
            widgets:
              # Icon (shown when OFF)
              - label:
                  text_font: $icon_font
                  align: top_left
                  id: filament_heater_icon
                  text: $filament
              # Humidity (shown when ON)
              - obj:
                  align: top_left
                  id: dryer_humidity_container
                  height: SIZE_CONTENT
                  width: SIZE_CONTENT
                  clickable: false
                  layout:
                    type: flex
                    flex_flow: row
                    flex_align_cross: end
                  bg_opa: TRANSP
                  border_width: 0
                  pad_all: 0
                  hidden: true
                  widgets:
                    - label:
                        text_font: roboto48_font
                        text_color: 0xFFFFFF
                        id: dryer_humidity_label
                        text: "--"
                    - label:
                        text_font: roboto17_font
                        text_color: 0xFFFFFF
                        text: "%"
              - label:
                  align: bottom_left
                  id: filament_heater_label
                  text: "Dryer"
            on_click:
              - homeassistant.service:
                  service: switch.toggle
                  data:
                    entity_id: switch.office_filament_heater_893b

        # =========================================================================
        # BUTTON: Air Conditioner
        # =========================================================================
        # WHAT THIS BUTTON DOES:
        #   Controls the office air conditioner unit.
        #   This runs a Home Assistant script (not a simple toggle) which may
        #   include additional logic like setting temperature or fan speed.
        #
        # WHEN PRESSED:
        #   Calls Home Assistant service: script.office_air_conditioner
        #   (Scripts can contain multiple actions and conditions)
        #
        # HOW THE BUTTON KNOWS IF IT'S ACTIVE:
        #   sensors.yaml monitors: switch.office_air_conditioner
        #   When the AC is running, this button appears "checked" (highlighted)
        #   When the AC is off, this button appears unchecked (dimmed)
        # =========================================================================
        - button: 
            height: $button_height_single
            width: $button_width
            checkable: true
            id: office_aircon_button
            styles: control
            widgets:
              - label:
                  text_font: $icon_font
                  align: top_left
                  text: $aircon
              - label:
                  align: bottom_left
                  text: "Aircon"
            on_click:
              - homeassistant.service:
                  service: script.office_air_conditioner

        # =========================================================================
        # BUTTON: Battery Charger
        # =========================================================================
        # WHAT THIS BUTTON DOES:
        #   Turns a battery charger power outlet on or off.
        #   This controls a smart plug that supplies power to a charging station.
        #
        # WHEN PRESSED:
        #   Calls Home Assistant service: switch.toggle
        #   Target: switch.d4c5
        #   (The "d4c5" is a device identifier - consider renaming in Home
        #   Assistant for clarity, e.g., "switch.office_battery_charger")
        #
        # HOW THE BUTTON KNOWS IF IT'S ACTIVE:
        #   sensors.yaml monitors: switch.d4c5
        #   When the switch is ON, this button appears "checked" (highlighted)
        #   When the switch is OFF, this button appears unchecked (dimmed)
        # =========================================================================
        - button: 
            height: $button_height_single
            width: $button_width
            checkable: true
            id: battery_charger_button
            styles: control
            widgets:
              - label:
                  text_font: $icon_font
                  align: top_left
                  id: battery_charger_icon
                  text: $battery
              - label:
                  align: bottom_left
                  id: battery_charger_label
                  text: "Charger"
            on_click:
              - homeassistant.service:
                  service: switch.toggle
                  data:
                    entity_id: switch.d4c5

        # =========================================================================
        # BUTTON: Storage Lights
        # =========================================================================
        # WHAT THIS BUTTON DOES:
        #   Toggles the storage area lights on/off.
        #
        # WHEN PRESSED:
        #   Calls Home Assistant service: light.toggle
        #   Target: light.office_storage
        #
        # HOW THE BUTTON KNOWS IF IT'S ACTIVE:
        #   sensors.yaml monitors: light.office_storage
        # =========================================================================
        - button: 
            height: $button_height_single
            width: $button_width
            checkable: true
            id: storage_lights_button
            styles: control
            widgets:
              - label:
                  text_font: $icon_font
                  align: top_left
                  text: $lights
              - label:
                  align: bottom_left
                  text: "Storage"
            on_click:
              - homeassistant.service:
                  service: light.toggle
                  data:
                    entity_id: light.office_storage

        # =========================================================================
        # BUTTON: Network Rack Lights
        # =========================================================================
        # WHAT THIS BUTTON DOES:
        #   Toggles the network rack lights on/off.
        #
        # WHEN PRESSED:
        #   Calls Home Assistant service: light.toggle
        #   Target: light.office_network_rack
        #
        # HOW THE BUTTON KNOWS IF IT'S ACTIVE:
        #   sensors.yaml monitors: light.office_network_rack
        # =========================================================================
        - button: 
            height: $button_height_single
            width: $button_width
            checkable: true
            id: network_rack_button
            styles: control
            widgets:
              - label:
                  text_font: $icon_font
                  align: top_left
                  text: $network
              - label:
                  align: bottom_left
                  text: "Rack"
            on_click:
              - homeassistant.service:
                  service: light.toggle
                  data:
                    entity_id: light.office_network_rack

    - id: blinds_page
      layout: 
        type: flex
        flex_flow: column_wrap
      scrollbar_mode: "auto"
      scroll_dir: "hor"
      width: 100%
      bg_color: Black
      bg_opa: cover
      pad_top: 34
      pad_bottom: 5
      pad_left: 5
      pad_right: 5

      widgets:

        # =========================================================================
        # BUTTON: Back (Return to Main Page)
        # =========================================================================
        - button: 
            height: $button_height_single
            width: $button_width
            checkable: false
            id: blinds_back_button
            styles: control
            widgets:
              - label:
                  text_font: $icon_font
                  align: top_left
                  text: $chevron_left
              - label:
                  align: bottom_left
                  text: "Back"
            on_click:
              - lvgl.page.show: main_page

        # =========================================================================
        # BUTTON: Blind Open (100%)
        # =========================================================================
        # WHAT THIS BUTTON DOES:
        #   Opens the office window blind completely (100% open position).
        #   Maximum natural light enters the room.
        #
        # WHEN PRESSED:
        #   Calls Home Assistant service: cover.set_cover_position
        #   Target: cover.office_blind
        #   Position: 100 (fully open)
        #
        # HOW THE BUTTON KNOWS IF IT'S ACTIVE:
        #   sensors.yaml reads the blind's current position from Home Assistant.
        #   A template sensor (office_blind_100) checks if position is within
        #   3% of 100%. If true, this button appears "checked" (highlighted).
        #   The 3% tolerance accounts for minor motor positioning differences.
        # =========================================================================
        - button: 
            height: $button_height_single
            width: $button_width
            checkable: true
            id: office_blind_open_button
            styles: control
            widgets:
              - label:
                  text_font: $icon_font
                  align: top_left
                  text: $blinds_open
              - label:
                  align: bottom_left
                  text: "Open"
            on_click:
              - homeassistant.service:
                  service: cover.set_cover_position
                  data:
                    entity_id: cover.office_blind
                    position: "100"

        # =========================================================================
        # BUTTON: Blind Semi Open (66%)
        # =========================================================================
        # WHAT THIS BUTTON DOES:
        #   Sets the office window blind to 66% open position.
        #   Allows good natural light while providing some shade.
        #
        # WHEN PRESSED:
        #   Calls Home Assistant service: cover.set_cover_position
        #   Target: cover.office_blind
        #   Position: 66 (two-thirds open)
        #
        # HOW THE BUTTON KNOWS IF IT'S ACTIVE:
        #   sensors.yaml reads the blind's current position from Home Assistant.
        #   A template sensor (office_blind_66) checks if position is within
        #   3% of 66%. If true, this button appears "checked" (highlighted).
        # =========================================================================
        - button: 
            height: $button_height_single
            width: $button_width
            checkable: true
            id: office_blind_66_button
            styles: control
            widgets:
              - label:
                  text_font: $icon_font
                  align: top_left
                  text: $blinds_open
              - label:
                  align: bottom_left
                  text: "Semi Open"
            on_click:
              - homeassistant.service:
                  service: cover.set_cover_position
                  data:
                    entity_id: cover.office_blind
                    position: "66"

        # =========================================================================
        # BUTTON: Blind Semi Closed (33%)
        # =========================================================================
        # WHAT THIS BUTTON DOES:
        #   Sets the office window blind to 33% open position.
        #   Mostly closed but allows some light through.
        #
        # WHEN PRESSED:
        #   Calls Home Assistant service: cover.set_cover_position
        #   Target: cover.office_blind
        #   Position: 33 (one-third open)
        #
        # HOW THE BUTTON KNOWS IF IT'S ACTIVE:
        #   sensors.yaml reads the blind's current position from Home Assistant.
        #   A template sensor (office_blind_33) checks if position is within
        #   3% of 33%. If true, this button appears "checked" (highlighted).
        # =========================================================================
        - button: 
            height: $button_height_single
            width: $button_width
            checkable: true
            id: office_blind_33_button
            styles: control
            widgets:
              - label:
                  text_font: $icon_font
                  align: top_left
                  text: $blinds_open
              - label:
                  align: bottom_left
                  text: "Semi Closed"
            on_click:
              - homeassistant.service:
                  service: cover.set_cover_position
                  data:
                    entity_id: cover.office_blind
                    position: "33"

        # =========================================================================
        # BUTTON: Blind Close (0%)
        # =========================================================================
        # WHAT THIS BUTTON DOES:
        #   Closes the office window blind completely (0% open position).
        #   Blocks all natural light and provides privacy.
        #
        # WHEN PRESSED:
        #   Calls Home Assistant service: cover.set_cover_position
        #   Target: cover.office_blind
        #   Position: 0 (fully closed)
        #
        # HOW THE BUTTON KNOWS IF IT'S ACTIVE:
        #   sensors.yaml reads the blind's current position from Home Assistant.
        #   A template sensor (office_blind_0) checks if position is within
        #   3% of 0%. If true, this button appears "checked" (highlighted).
        # =========================================================================
        - button: 
            height: $button_height_single
            width: $button_width
            checkable: true
            id: office_blind_close_button
            styles: control
            widgets:
              - label:
                  text_font: $icon_font
                  align: top_left
                  text: $blinds_closed
              - label:
                  align: bottom_left
                  text: "Close"
            on_click:
              - homeassistant.service:
                  service: cover.set_cover_position
                  data:
                    entity_id: cover.office_blind
                    position: "0"
